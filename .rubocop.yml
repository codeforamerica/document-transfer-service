require:
  - rubocop-factory_bot
  - rubocop-md
  - rubocop-rake
  - rubocop-rspec
  - rubocop-sequel
  - rubocop-yard

AllCops:
  NewCops: enable
  SuggestExtensions: true
  Exclude:
    # This is an autogenerated file, so we don't want to lint it.
    - 'db/*schema.rb'
    - 'out/**/*'
    - 'vendor/**/*'
    - 'doc/**/*'

# Transient properties get mistaken for associations in FactoryBot.
# See https://github.com/rubocop/rubocop-factory_bot/issues/73
FactoryBot/FactoryAssociationWithStrategy:
  Enabled: false

Layout/InitialIndentation:
  Exclude:
    # Runbooks often have indented code blocks and rubocop doesn't like that.
    # https://github.com/rubocop/rubocop-md/issues/28
    - doc/runbooks/**/*.md

# Don't let long declarations and invocations to contribute to method length.
# This is preferable over squeezing them onto a single line.
Metrics/MethodLength:
  CountAsOne:
    - array
    - method_call
    - hash

Metrics/BlockLength:
  AllowedMethods:
    # Exclude grape `resource` blocks.
    - resource

RSpec/DescribeClass:
  Exclude:
    # Rake tests are named after the task, not the class.
    - spec/functional/document_transfer/rake/**/*.rb

# Count multi-line hashes and arrays in examples as one line.
RSpec/ExampleLength:
  CountAsOne:
    - array
    - hash

RSpec/MessageSpies:
  Exclude:
    # We use a proc to define expectations in these tests, which don't work
    # with `have_received`.
    - spec/unit/document_transfer/api/middleware/*.rb

# Favor more reusable helpers.
RSpec/MultipleMemoizedHelpers:
  Max: 10
